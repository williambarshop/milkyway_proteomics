<tool id="fido_q_values" name="Fido q-value converter">
    <description>Fido q-value calculator</description>
    <version_string>0.0.6</version_string>
    <command>
   #for $each in $targz_input:
       tar xzvf $each;
   #end for
    python /galaxy-central/tools/wohl-proteomics/fido/fido_q.py $fidoout $decoy $fidoout_q $fidoCT $clip_zero;
    cp p_to_q_dict.csv $p_to_q ;
    tar -xzvf $crux_perco_targz ;
    python /galaxy-central/tools/wohl-proteomics/fido/q_value_replacer.py --fidoq $fidoout_q $diaumpire $add_peptide_indicies $clean_spectra 2>&amp;1;
    tar -cvf - output/ 2>/dev/null | pigz -9 -p 32 > $crux_tar_gz 2>&amp;1;
    </command>
    <inputs>
        <param type="data" label="Fido Output Data" name="fidoout"/>
        <param name="decoy" type="text" label="Decoy string" value="Reverse_" />
        <param name="fidoCT" type="boolean" truevalue="true" falsevalue="false" label="FidoCT input?" checked="True"/>
        <param name="clip_zero" type="boolean" truevalue="true" falsevalue="false" label="Clip out zero values from output?" checked="True"/>
        <param name="diaumpire" type="boolean" truevalue="--diaumpire" falsevalue="" label="Spectral input from DIAUmpire converted to mzML?" checked="False"/>
        <param name="add_peptide_indicies" type="boolean" label="Add protein indicies per peptide?" truevalue="--index" falsevalue="" checked="True" />
        <param name="clean_spectra" type="boolean" label="Clean Up Incorrectly Annotated Spectra?" truevalue="--clean" falsevalue="" checked="True" help="Used to clean up problem with crux percolator top-match filter (early 2016) -- will remove all PSMs where the peptide does not map correctly to the attributed protein."/>
        <param name="crux_perco_targz" type="data" label="crux percolator .tar.gz file" />
        <param name="targz_input" type="data" multiple="true" label="target decoy targz inputs from msgf+" />
    </inputs>
    <outputs>
        <data name="fidoout_q"/>
        <data name="p_to_q" label="FIDO p-to-q value csv" format="csv"/>
        <data name="crux_tar_gz"/>
    </outputs>
    
</tool>
